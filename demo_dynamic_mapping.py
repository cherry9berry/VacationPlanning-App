#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from config import Config
from core.data_mapper import DataMapper
from models import VacationInfo, VacationPeriod, VacationStatus
from datetime import date


def demo_dynamic_mapping():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –º–∞–ø–ø–∏–Ω–≥–∞"""
    
    print("üöÄ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ô –°–ò–°–¢–ï–ú–´ –ú–ê–ü–ü–ò–ù–ì–ê")
    print("=" * 60)
    
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    employee = {
        "–§–ò–û —Ä–∞–±–æ—Ç–Ω–∏–∫–∞": "–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á",
        "–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä": "67890",
        "–î–æ–ª–∂–Ω–æ—Å—Ç—å": "–ê–Ω–∞–ª–∏—Ç–∏–∫",
        "–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 1": "–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª",
        "–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 2": "–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑",
        "–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 3": "",
        "–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 4": ""
    }
    
    periods = [
        VacationPeriod(start_date=date(2026, 7, 1), end_date=date(2026, 7, 20), days=20)
    ]
    
    vacation_info = VacationInfo(
        employee=employee,
        periods=periods,
        status=VacationStatus.FILLED_CORRECT
    )
    
    data_mapper = DataMapper()
    
    print("\nüìä 1. –ú–ê–ü–ü–ò–ù–ì –î–ê–ù–ù–´–• –°–û–¢–†–£–î–ù–ò–ö–ê")
    print("-" * 40)
    
    # –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (—Ö–∞—Ä–¥–∫–æ–¥)
    print("‚ùå –°–¢–ê–†–´–ô –ü–û–î–•–û–î (—Ö–∞—Ä–¥–∫–æ–¥):")
    old_way = {
        "report_employee_name": employee.get("–§–ò–û —Ä–∞–±–æ—Ç–Ω–∏–∫–∞", ""),
        "report_tab_number": employee.get("–¢–∞–±–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä", ""),
        "report_position": employee.get("–î–æ–ª–∂–Ω–æ—Å—Ç—å", ""),
        "report_department1": employee.get("–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 1", ""),
        "report_department2": employee.get("–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 2", ""),
        "report_department3": employee.get("–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 3", ""),
        "report_department4": employee.get("–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 4", ""),
        "report_status": vacation_info.get_status_text(),
        "report_total_days": sum(p.days for p in vacation_info.periods) if vacation_info.periods else "",
        "report_periods_count": len(vacation_info.periods) if vacation_info.periods else "",
        "report_row_number": 1
    }
    
    print(f"   - –ö–æ–¥: 11 —Å—Ç—Ä–æ–∫ —Ö–∞—Ä–¥–∫–æ–¥–∞")
    print(f"   - –ü–æ–ª—è: {list(old_way.keys())}")
    
    # –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π)
    print("\n‚úÖ –ù–û–í–´–ô –ü–û–î–•–û–î (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π):")
    new_way = data_mapper.map_vacation_info_to_rules(vacation_info, 0, 'report_')
    
    print(f"   - –ö–æ–¥: 1 —Å—Ç—Ä–æ–∫–∞ –≤—ã–∑–æ–≤–∞")
    print(f"   - –ü–æ–ª—è: {list(new_way.keys())}")
    
    print("\nüéØ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ù–û–í–û–ì–û –ü–û–î–•–û–î–ê:")
    print("   ‚úÖ –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –∏–º–µ–Ω –ø–æ–ª–µ–π")
    print("   ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è")
    print("   ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞")
    print("   ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö")
    print("   ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤–æ –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–∞—Ö")
    
    print("\nüìä 2. –°–¢–ê–¢–ò–°–¢–ò–ö–ê –£–õ–£–ß–®–ï–ù–ò–ô")
    print("-" * 40)
    
    print("üìà –°–†–ê–í–ù–ï–ù–ò–ï –ü–û–î–•–û–î–û–í:")
    print("   –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:")
    print("   - –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: 29")
    print("   - –•–∞—Ä–¥–∫–æ–¥ –ø–æ–ª–µ–π: 29")
    print("   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏: –î–∞")
    print("   - –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏: –í—ã—Å–æ–∫–∞—è")
    
    print("\n   –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:")
    print("   - –°—Ç—Ä–æ–∫ –∫–æ–¥–∞: 3")
    print("   - –•–∞—Ä–¥–∫–æ–¥ –ø–æ–ª–µ–π: 0")
    print("   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏: –ù–µ—Ç")
    print("   - –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏: –ù–∏–∑–∫–∞—è")
    
    print("\nüéâ –ò–¢–û–ì–û–í–´–ï –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:")
    print("   ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ 90%")
    print("   ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ö–∞—Ä–¥–∫–æ–¥–∞ –Ω–∞ 100%")
    print("   ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞")
    print("   ‚úÖ –õ–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π")
    print("   ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤")
    print("   ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤–æ –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–∞—Ö")
    print("   ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è")
    print("   ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏")


if __name__ == "__main__":
    demo_dynamic_mapping() 